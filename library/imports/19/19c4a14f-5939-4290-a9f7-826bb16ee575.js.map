{"version":3,"sources":["assets/Script/Game/GameLoader.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    @property(cc.Prefab)\n    Square: cc.Prefab = null;\n    @property(cc.Node)\n    PauseMenu: cc.Node = null;\n    @property(cc.Node)\n    MainMenu: cc.Node = null;\n\n    ValueList: number[] = [];\n    Rows: number = 4;\n    Columns: number = 4;\n    Timer: number = 0;\n    isPaused: boolean = false;\n\n    onLoad () {\n        this.PauseMenu.active = false;\n        this.PauseMenu.getChildByName(\"Continue Button\").\n        on(\"click\", () => this.ContinueGame(this.CheckGameEnd()));\n\n        this.node.parent.getChildByName(\"Pause Button\").on(\"click\", () => this.PauseGame());\n        this.node.parent.getChildByName(\"Reset Button\").on(\"click\", () => this.ResetGame());\n        this.node.parent.getChildByName(\"Back To Menu Button\").on(\"click\", () => this.BackToMenu());\n    }\n\n    onEnable () {\n        this.ResetGame();\n    }\n\n    start () {\n        this.ResetGame();\n    }\n\n    SetValueList(rows:number, columns: number) {\n        this.ValueList = [];\n\n        for (let i = 0; i < rows; i++) {\n            for (let j = 0; j < columns; j++) {\n                const value = i * columns + j;\n                if(value !== 0) {\n                    this.ValueList.push(value);\n                }\n            }\n        }\n    } \n\n    Init (rows:number, columns: number) {\n        const layout = this.node.getComponent(cc.Layout);\n        layout.cellSize = cc.size((this.node.width - layout.paddingLeft)/columns - layout.spacingX,\n        (this.node.height - layout.paddingTop)/rows - layout.spacingY);\n\n        this.CreateChildren();\n    }\n\n    CreateChildren () {\n        this.node.removeAllChildren();\n\n        this.ValueList.forEach((value, index) => {\n            if (value !== 0) {\n                let newSquare = cc.instantiate(this.Square);\n                newSquare.width = this.node.getComponent(cc.Layout).cellSize.width;\n                newSquare.height = this.node.getComponent(cc.Layout).cellSize.height;\n                newSquare.getComponent('Square').Init(value, index);\n                newSquare.on('touchstart', () => this.Onclick(index));\n                this.node.addChild(newSquare);\n            } else {\n                let node = new cc.Node('Blank');\n                this.node.addChild(node);\n            }\n        });\n    }\n\n    Shuffle (array: number[]) {\n        let currentIndex = 0;\n\n        while (currentIndex < array.length) {\n            const randomIndex = Math.floor(Math.random() * (array.length - currentIndex) + currentIndex);\n            [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];\n            currentIndex++;\n        }\n\n        let inversion = 0;\n\n        for (let i = 0; i < array.length - 1; i++) {\n            let count = 0;\n            for (let j = i + 1; j < array.length; j++) {\n                if(array[i] > array[j]) {\n                    count++;\n                }\n            }\n            console.log(count);\n            inversion += count;\n        }\n        console.log(inversion);\n        if (inversion % 2 !== 0) {\n            [array[0],array[1]] = [array[1],array[0]];\n        }\n    }\n\n    Onclick (index: number) {\n        let blankIndex = this.ValueList.findIndex((value) => {\n            return value === 0;\n        });\n\n        if ((Math.floor(index / this.Columns) === Math.floor(blankIndex / this.Columns) \n            && Math.abs(index - blankIndex) === 1) \n            || Math.abs(index - blankIndex) === this.Columns) {\n                [this.ValueList[index], this.ValueList[blankIndex]] =\n                [this.ValueList[blankIndex], this.ValueList[index]];\n    \n                this.CreateChildren();\n        }\n    }\n\n    CheckGameEnd () {\n        let isAllCorrect = true;\n\n        this.ValueList.forEach((value, index) => {\n            if(value - index !== 1 && value !== 0) {\n                isAllCorrect = false;\n            }\n        });\n\n        return isAllCorrect;\n    }\n\n    BackToMenu () {\n        this.PauseMenu.active = false;\n        this.node.parent.active = false;\n        this.MainMenu.active = true;\n    }\n\n    PauseGame () {\n        this.PauseMenu.active = true;\n        this.isPaused = true;\n    }\n\n    ResetGame () {\n        this.SetValueList(this.Rows, this.Columns);\n        this.Shuffle(this.ValueList);\n        this.ValueList.push(0);\n        this.Init(this.Rows, this.Columns);\n        this.Timer = 0;\n    }\n\n    ContinueGame (isGameEnd: boolean) {\n        this.PauseMenu.active = false;\n        this.isPaused = false;\n\n        if(isGameEnd) {\n            this.ResetGame();\n        }\n    }\n\n    GetTime () {\n        const seconds = Math.floor(this.Timer) % 60;\n        const minutes = Math.floor(this.Timer / 60);\n        let time = \"\";\n\n        if(minutes < 10) {\n            time += \"0\" + minutes + \" : \";\n        } else {\n            time += minutes + \" : \";\n        }\n\n        if(seconds < 10) {\n            time += \"0\" + seconds;\n        } else {\n            time += seconds;\n        }\n\n        return { time, seconds, minutes }\n    }\n\n    update (dt) {\n        if(!this.isPaused) {\n            this.Timer += dt;\n        }\n\n        this.node.parent.getChildByName(\"TimerLabel\").getComponent(cc.Label).string = this.GetTime().time;\n\n        if (this.CheckGameEnd()) {\n            this.PauseMenu.active = true;\n            this.isPaused = true\n\n            this.PauseMenu.getChildByName(\"PauseMenuLabel\").getComponent(cc.Label).string\n            = \"Good jobs, you complete the puzzle in \" + this.GetTime().minutes + \" minutes and \" \n            + this.GetTime().seconds + \" seconds!!! \\n Do you want to play again???\";\n        }\n    }\n}\n"]}